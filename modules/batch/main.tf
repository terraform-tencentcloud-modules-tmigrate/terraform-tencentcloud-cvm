
module "batch" {
  source = "../stand-alone"
  for_each = var.cvms
  instance_name = try(each.value.instance_name, null)
  hostname = try(each.value.hostname, null)
  project_id = try(each.value.project_id, 0)
  availability_zone = each.value.availability_zone
  image_id = try(each.value.image_id, null)
  os_name = try(each.value.os_name, null)
  image_name = try(each.value.image_name, null)
  image_type = try(each.value.image_type, ["PUBLIC_IMAGE"])
  instance_type = try(each.value.instance_type, null)
  instance_type_filters = try(each.value.instance_type_filters, {})
  cpu_core_count = try(each.value.cpu_core_count, null)
  memory_size = try(each.value.memory_size, null)
  gpu_core_count = try(each.value.gpu_core_count, null)
  system_disk_type = try(each.value.system_disk_type, "CLOUD_PREMIUM")
  system_disk_size = try(each.value.system_disk_size, 50)
  allocate_public_ip = try(each.value.allocate_public_ip, false)
  vpc_id = each.value.vpc_id
  subnet_id = each.value.subnet_id
  internet_max_bandwidth_out = try(each.value.internet_max_bandwidth_out, null)
  key_ids = try(each.value.key_ids, null)
  password = try(each.value.password, null)
  security_group_ids = try(each.value.security_group_ids, null)
  tags = try(each.value.tags, {})
  private_ip = try(each.value.private_ip, null)
  monitoring = try(each.value.monitoring, true)
  user_data = try(each.value.user_data, null)
  user_data_raw = try(each.value.user_data_raw, null)
  user_data_base64 = try(each.value.user_data_base64, null)
  cam_role_name = try(each.value.cam_role_name, null)
  instance_charge_type = try(each.value.instance_charge_type, "POSTPAID_BY_HOUR")
  instance_charge_type_prepaid_period = try(each.value.instance_charge_type_prepaid_period, null)
  instance_charge_type_prepaid_renew_flag = try(each.value.instance_charge_type_prepaid_renew_flag, null)
  delete_with_instance = try(each.value.delete_with_instance, true)
  data_disks = try(each.value.data_disks, [])
  action_timer = try(each.value.action_timer, null)
  create_assume_role = try(each.value.create_assume_role, false)
  create_assume_role_policy = try(each.value.create_assume_role_policy, false)
  assume_role_description = try(each.value.assume_role_description, "")
  assume_role_policy_name = try(each.value.assume_role_policy_name, "")
  assume_role_policy_document = try(each.value.assume_role_policy_document, "")
  assume_role_policy_description = try(each.value.assume_role_policy_description, "")
  disable_security_service = try(each.value.disable_security_service, true)
  disable_monitor_service = try(each.value.disable_monitor_service, true)
  disable_automation_service = try(each.value.disable_automation_service, false)
}